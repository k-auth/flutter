# K-Auth Flutter

> 한국 앱을 위한 소셜 로그인 SDK (v0.2.0)

카카오, 네이버, 구글, 애플을 하나의 API로 구현하세요.

## 핵심 기능

- **통합 API**: 모든 Provider를 `signIn(AuthProvider.kakao)` 형태로 사용
- **표준화된 응답**: `KAuthUser`로 Provider별 응답 통합
- **함수형 패턴**: `fold`, `when`, `onSuccess`, `onFailure` 지원
- **상태 관리**: `authStateChanges` Stream (Firebase Auth 스타일)
- **한글 에러**: 에러 메시지, 힌트, 문서 링크 제공
- **UI 컴포넌트**: 공식 디자인 가이드라인 준수 버튼

## 주요 클래스

### KAuth (lib/k_auth.dart)
메인 클래스. 초기화, 로그인, 로그아웃 담당.
- `initialize()`: SDK 초기화
- `signIn(provider)`: 로그인
- `signOut()`: 로그아웃 (provider 생략 가능)
- `authStateChanges`: 인증 상태 Stream
- `currentUser`, `isSignedIn`: 현재 상태

### AuthResult (lib/models/auth_result.dart)
로그인 결과. 성공/실패 정보 포함.
- `fold(onSuccess, onFailure)`: 분기 처리
- `when(success, cancelled, failure)`: 세분화 처리
- `onSuccess()`, `onFailure()`: 체이닝
- `mapUser()`, `mapUserOr()`: 값 추출

### KAuthUser (lib/models/k_auth_user.dart)
표준화된 사용자 정보.
- `id`, `name`, `email`, `image`, `phone`
- `displayName`, `age`: 헬퍼 메서드

### Config 클래스들 (lib/models/auth_config.dart)
- `KAuthConfig`: 전체 설정
- `KakaoConfig`: 카카오 설정 (appKey 필수)
- `NaverConfig`: 네이버 설정 (clientId, clientSecret 필수)
- `GoogleConfig`: 구글 설정 (iosClientId 권장)
- `AppleConfig`: 애플 설정

### KAuthLogger (lib/utils/logger.dart)
디버그 로깅 시스템.
- `KAuthLogger.level = KAuthLogLevel.debug`: 로그 활성화
- `KAuthLogger.onLog`: 커스텀 로거

## 사용 예시

```dart
// 초기화
final kAuth = KAuth(
  config: KAuthConfig(
    kakao: KakaoConfig(appKey: 'YOUR_KEY'),
    google: GoogleConfig(),
  ),
);
kAuth.initialize();

// 로그인 (함수형)
final result = await kAuth.signIn(AuthProvider.kakao);
result.fold(
  onSuccess: (user) => print('환영합니다, ${user.displayName}!'),
  onFailure: (error) => print('실패: $error'),
);

// 상태 감지
kAuth.authStateChanges.listen((user) {
  print(user != null ? '로그인됨' : '로그아웃됨');
});

// 로그아웃
await kAuth.signOut();
```

## 파일 구조

```
lib/
├── k_auth.dart           # 메인 클래스 + exports
├── models/
│   ├── auth_result.dart  # 로그인 결과 + AuthProvider enum
│   ├── auth_config.dart  # 설정 클래스들
│   └── k_auth_user.dart  # 사용자 정보
├── errors/
│   └── k_auth_error.dart # 에러 클래스 + ErrorCodes
├── providers/
│   ├── kakao_provider.dart
│   ├── naver_provider.dart
│   ├── google_provider.dart
│   └── apple_provider.dart
├── utils/
│   └── logger.dart       # 로깅 시스템
└── widgets/
    └── login_buttons.dart # UI 버튼 컴포넌트
```

## 기여 시 참고

- 테스트: `flutter test`
- 분석: `dart analyze`
- 포맷: `dart format .`
- 모든 public API에 dartdoc 주석 필수
